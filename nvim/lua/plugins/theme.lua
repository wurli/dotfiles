local use_rstudio_console_colours = function()
    vim.g.terminal_color_0 = "#4f4f4f"
    vim.g.terminal_color_1 = "#ff6c60"
    vim.g.terminal_color_2 = "#a8ff60"
    vim.g.terminal_color_3 = "#ffffb6"
    vim.g.terminal_color_4 = "#96cbfe"
    vim.g.terminal_color_5 = "#ff73fd"
    vim.g.terminal_color_6 = "#c6c5fe"
    vim.g.terminal_color_7 = "#eeeeee"
    vim.g.terminal_color_8 = "#7c7c7c"
    vim.g.terminal_color_9 = "#ffb6b0"
    vim.g.terminal_color_10 = "#ceffac"
    vim.g.terminal_color_11 = "#ffffcc"
    vim.g.terminal_color_12 = "#b5dcff"
    vim.g.terminal_color_13 = "#ff9cfe"
    vim.g.terminal_color_14 = "#dfdffe"
    vim.g.terminal_color_15 = "#ffffff"
    vim.g.terminal_color_16 = "#000000"
    vim.g.terminal_color_17 = "#00005f"
    vim.g.terminal_color_18 = "#000087"
    vim.g.terminal_color_19 = "#0000af"
    vim.g.terminal_color_20 = "#0000d7"
    vim.g.terminal_color_21 = "#0000ff"
    vim.g.terminal_color_22 = "#005f00"
    vim.g.terminal_color_23 = "#005f5f"
    vim.g.terminal_color_24 = "#005f87"
    vim.g.terminal_color_25 = "#005faf"
    vim.g.terminal_color_26 = "#005fd7"
    vim.g.terminal_color_27 = "#005fff"
    vim.g.terminal_color_28 = "#008700"
    vim.g.terminal_color_29 = "#00875f"
    vim.g.terminal_color_30 = "#008787"
    vim.g.terminal_color_31 = "#0087af"
    vim.g.terminal_color_32 = "#0087d7"
    vim.g.terminal_color_33 = "#0087ff"
    vim.g.terminal_color_34 = "#00af00"
    vim.g.terminal_color_35 = "#00af5f"
    vim.g.terminal_color_36 = "#00af87"
    vim.g.terminal_color_37 = "#00afaf"
    vim.g.terminal_color_38 = "#00afd7"
    vim.g.terminal_color_39 = "#00afff"
    vim.g.terminal_color_40 = "#00d700"
    vim.g.terminal_color_41 = "#00d75f"
    vim.g.terminal_color_42 = "#00d787"
    vim.g.terminal_color_43 = "#00d7af"
    vim.g.terminal_color_44 = "#00d7d7"
    vim.g.terminal_color_45 = "#00d7ff"
    vim.g.terminal_color_46 = "#00ff00"
    vim.g.terminal_color_47 = "#00ff5f"
    vim.g.terminal_color_48 = "#00ff87"
    vim.g.terminal_color_49 = "#00ffaf"
    vim.g.terminal_color_50 = "#00ffd7"
    vim.g.terminal_color_51 = "#00ffff"
    vim.g.terminal_color_52 = "#5f0000"
    vim.g.terminal_color_53 = "#5f005f"
    vim.g.terminal_color_54 = "#5f0087"
    vim.g.terminal_color_55 = "#5f00af"
    vim.g.terminal_color_56 = "#5f00d7"
    vim.g.terminal_color_57 = "#5f00ff"
    vim.g.terminal_color_58 = "#5f5f00"
    vim.g.terminal_color_59 = "#5f5f5f"
    vim.g.terminal_color_60 = "#5f5f87"
    vim.g.terminal_color_61 = "#5f5faf"
    vim.g.terminal_color_62 = "#5f5fd7"
    vim.g.terminal_color_63 = "#5f5fff"
    vim.g.terminal_color_64 = "#5f8700"
    vim.g.terminal_color_65 = "#5f875f"
    vim.g.terminal_color_66 = "#5f8787"
    vim.g.terminal_color_67 = "#5f87af"
    vim.g.terminal_color_68 = "#5f87d7"
    vim.g.terminal_color_69 = "#5f87ff"
    vim.g.terminal_color_70 = "#5faf00"
    vim.g.terminal_color_71 = "#5faf5f"
    vim.g.terminal_color_72 = "#5faf87"
    vim.g.terminal_color_73 = "#5fafaf"
    vim.g.terminal_color_74 = "#5fafd7"
    vim.g.terminal_color_75 = "#5fafff"
    vim.g.terminal_color_76 = "#5fd700"
    vim.g.terminal_color_77 = "#5fd75f"
    vim.g.terminal_color_78 = "#5fd787"
    vim.g.terminal_color_79 = "#5fd7af"
    vim.g.terminal_color_80 = "#5fd7d7"
    vim.g.terminal_color_81 = "#5fd7ff"
    vim.g.terminal_color_82 = "#5fff00"
    vim.g.terminal_color_83 = "#5fff5f"
    vim.g.terminal_color_84 = "#5fff87"
    vim.g.terminal_color_85 = "#5fffaf"
    vim.g.terminal_color_86 = "#5fffd7"
    vim.g.terminal_color_87 = "#5fffff"
    vim.g.terminal_color_88 = "#870000"
    vim.g.terminal_color_89 = "#87005f"
    vim.g.terminal_color_90 = "#870087"
    vim.g.terminal_color_91 = "#8700af"
    vim.g.terminal_color_92 = "#8700d7"
    vim.g.terminal_color_93 = "#8700ff"
    vim.g.terminal_color_94 = "#875f00"
    vim.g.terminal_color_95 = "#875f5f"
    vim.g.terminal_color_96 = "#875f87"
    vim.g.terminal_color_97 = "#875faf"
    vim.g.terminal_color_98 = "#875fd7"
    vim.g.terminal_color_99 = "#875fff"
    vim.g.terminal_color_100 = "#878700"
    vim.g.terminal_color_101 = "#87875f"
    vim.g.terminal_color_102 = "#878787"
    vim.g.terminal_color_103 = "#8787af"
    vim.g.terminal_color_104 = "#8787d7"
    vim.g.terminal_color_105 = "#8787ff"
    vim.g.terminal_color_106 = "#87af00"
    vim.g.terminal_color_107 = "#87af5f"
    vim.g.terminal_color_108 = "#87af87"
    vim.g.terminal_color_109 = "#87afaf"
    vim.g.terminal_color_110 = "#87afd7"
    vim.g.terminal_color_111 = "#87afff"
    vim.g.terminal_color_112 = "#87d700"
    vim.g.terminal_color_113 = "#87d75f"
    vim.g.terminal_color_114 = "#87d787"
    vim.g.terminal_color_115 = "#87d7af"
    vim.g.terminal_color_116 = "#87d7d7"
    vim.g.terminal_color_117 = "#87d7ff"
    vim.g.terminal_color_118 = "#87ff00"
    vim.g.terminal_color_119 = "#87ff5f"
    vim.g.terminal_color_120 = "#87ff87"
    vim.g.terminal_color_121 = "#87ffaf"
    vim.g.terminal_color_122 = "#87ffd7"
    vim.g.terminal_color_123 = "#87ffff"
    vim.g.terminal_color_124 = "#af0000"
    vim.g.terminal_color_125 = "#af005f"
    vim.g.terminal_color_126 = "#af0087"
    vim.g.terminal_color_127 = "#af00af"
    vim.g.terminal_color_128 = "#af00d7"
    vim.g.terminal_color_129 = "#af00ff"
    vim.g.terminal_color_130 = "#af5f00"
    vim.g.terminal_color_131 = "#af5f5f"
    vim.g.terminal_color_132 = "#af5f87"
    vim.g.terminal_color_133 = "#af5faf"
    vim.g.terminal_color_134 = "#af5fd7"
    vim.g.terminal_color_135 = "#af5fff"
    vim.g.terminal_color_136 = "#af8700"
    vim.g.terminal_color_137 = "#af875f"
    vim.g.terminal_color_138 = "#af8787"
    vim.g.terminal_color_139 = "#af87af"
    vim.g.terminal_color_140 = "#af87d7"
    vim.g.terminal_color_141 = "#af87ff"
    vim.g.terminal_color_142 = "#afaf00"
    vim.g.terminal_color_143 = "#afaf5f"
    vim.g.terminal_color_144 = "#afaf87"
    vim.g.terminal_color_145 = "#afafaf"
    vim.g.terminal_color_146 = "#afafd7"
    vim.g.terminal_color_147 = "#afafff"
    vim.g.terminal_color_148 = "#afd700"
    vim.g.terminal_color_149 = "#afd75f"
    vim.g.terminal_color_150 = "#afd787"
    vim.g.terminal_color_151 = "#afd7af"
    vim.g.terminal_color_152 = "#afd7d7"
    vim.g.terminal_color_153 = "#afd7ff"
    vim.g.terminal_color_154 = "#afff00"
    vim.g.terminal_color_155 = "#afff5f"
    vim.g.terminal_color_156 = "#afff87"
    vim.g.terminal_color_157 = "#afffaf"
    vim.g.terminal_color_158 = "#afffd7"
    vim.g.terminal_color_159 = "#afffff"
    vim.g.terminal_color_160 = "#d70000"
    vim.g.terminal_color_161 = "#d7005f"
    vim.g.terminal_color_162 = "#d70087"
    vim.g.terminal_color_163 = "#d700af"
    vim.g.terminal_color_164 = "#d700d7"
    vim.g.terminal_color_165 = "#d700ff"
    vim.g.terminal_color_166 = "#d75f00"
    vim.g.terminal_color_167 = "#d75f5f"
    vim.g.terminal_color_168 = "#d75f87"
    vim.g.terminal_color_169 = "#d75faf"
    vim.g.terminal_color_170 = "#d75fd7"
    vim.g.terminal_color_171 = "#d75fff"
    vim.g.terminal_color_172 = "#d78700"
    vim.g.terminal_color_173 = "#d7875f"
    vim.g.terminal_color_174 = "#d78787"
    vim.g.terminal_color_175 = "#d787af"
    vim.g.terminal_color_176 = "#d787d7"
    vim.g.terminal_color_177 = "#d787ff"
    vim.g.terminal_color_178 = "#d7af00"
    vim.g.terminal_color_179 = "#d7af5f"
    vim.g.terminal_color_180 = "#d7af87"
    vim.g.terminal_color_181 = "#d7afaf"
    vim.g.terminal_color_182 = "#d7afd7"
    vim.g.terminal_color_183 = "#d7afff"
    vim.g.terminal_color_184 = "#d7d700"
    vim.g.terminal_color_185 = "#d7d75f"
    vim.g.terminal_color_186 = "#d7d787"
    vim.g.terminal_color_187 = "#d7d7af"
    vim.g.terminal_color_188 = "#d7d7d7"
    vim.g.terminal_color_189 = "#d7d7ff"
    vim.g.terminal_color_190 = "#d7ff00"
    vim.g.terminal_color_191 = "#d7ff5f"
    vim.g.terminal_color_192 = "#d7ff87"
    vim.g.terminal_color_193 = "#d7ffaf"
    vim.g.terminal_color_194 = "#d7ffd7"
    vim.g.terminal_color_195 = "#d7ffff"
    vim.g.terminal_color_196 = "#ff0000"
    vim.g.terminal_color_197 = "#ff005f"
    vim.g.terminal_color_198 = "#ff0087"
    vim.g.terminal_color_199 = "#ff00af"
    vim.g.terminal_color_200 = "#ff00d7"
    vim.g.terminal_color_201 = "#ff00ff"
    vim.g.terminal_color_202 = "#ff5f00"
    vim.g.terminal_color_203 = "#ff5f5f"
    vim.g.terminal_color_204 = "#ff5f87"
    vim.g.terminal_color_205 = "#ff5faf"
    vim.g.terminal_color_206 = "#ff5fd7"
    vim.g.terminal_color_207 = "#ff5fff"
    vim.g.terminal_color_208 = "#ff8700"
    vim.g.terminal_color_209 = "#ff875f"
    vim.g.terminal_color_210 = "#ff8787"
    vim.g.terminal_color_211 = "#ff87af"
    vim.g.terminal_color_212 = "#ff87d7"
    vim.g.terminal_color_213 = "#ff87ff"
    vim.g.terminal_color_214 = "#ffaf00"
    vim.g.terminal_color_215 = "#ffaf5f"
    vim.g.terminal_color_216 = "#ffaf87"
    vim.g.terminal_color_217 = "#ffafaf"
    vim.g.terminal_color_218 = "#ffafd7"
    vim.g.terminal_color_219 = "#ffafff"
    vim.g.terminal_color_220 = "#ffd700"
    vim.g.terminal_color_221 = "#ffd75f"
    vim.g.terminal_color_222 = "#ffd787"
    vim.g.terminal_color_223 = "#ffd7af"
    vim.g.terminal_color_224 = "#ffd7d7"
    vim.g.terminal_color_225 = "#ffd7ff"
    vim.g.terminal_color_226 = "#ffff00"
    vim.g.terminal_color_227 = "#ffff5f"
    vim.g.terminal_color_228 = "#ffff87"
    vim.g.terminal_color_229 = "#ffffaf"
    vim.g.terminal_color_230 = "#ffffd7"
    vim.g.terminal_color_231 = "#ffffff"
    vim.g.terminal_color_232 = "#080808"
    vim.g.terminal_color_233 = "#121212"
    vim.g.terminal_color_234 = "#1c1c1c"
    vim.g.terminal_color_235 = "#262626"
    vim.g.terminal_color_236 = "#303030"
    vim.g.terminal_color_237 = "#3a3a3a"
    vim.g.terminal_color_238 = "#444444"
    vim.g.terminal_color_239 = "#4e4e4e"
    vim.g.terminal_color_240 = "#585858"
    vim.g.terminal_color_241 = "#626262"
    vim.g.terminal_color_242 = "#6c6c6c"
    vim.g.terminal_color_243 = "#767676"
    vim.g.terminal_color_244 = "#808080"
    vim.g.terminal_color_245 = "#8a8a8a"
    vim.g.terminal_color_246 = "#949494"
    vim.g.terminal_color_247 = "#9e9e9e"
    vim.g.terminal_color_248 = "#a8a8a8"
    vim.g.terminal_color_249 = "#b2b2b2"
    vim.g.terminal_color_250 = "#bcbcbc"
    vim.g.terminal_color_251 = "#c6c6c6"
    vim.g.terminal_color_252 = "#d0d0d0"
    vim.g.terminal_color_253 = "#dadada"
    vim.g.terminal_color_254 = "#e4e4e4"
    vim.g.terminal_color_255 = "#eeeeee"
end

-------------------------------------------------------------------------------
-- Kanagawa theme - quite nice??
-------------------------------------------------------------------------------
return {
    {
        "rebelot/kanagawa.nvim",
        config = function()
            require('kanagawa').setup({
                compile = false,             -- enable compiling the colorscheme
                undercurl = true,            -- enable undercurls
                commentStyle = { italic = true },
                functionStyle = {},
                keywordStyle = { italic = true},
                statementStyle = { bold = true },
                typeStyle = {},
                transparent = false,         -- do not set background color
                dimInactive = false,         -- dim inactive window `:h hl-NormalNC`
                terminalColors = true,       -- define vim.g.terminal_color_{0,17}
                colors = {                   -- add/modify theme and palette colors
                    palette = {},
                    theme = { wave = {}, lotus = {}, dragon = {}, all = {} },
                },
                overrides = function(colors)
                    local theme = colors.theme
                    return {
                        NormalFloat = { bg = "none" },
                        FloatBorder = { bg = "none" },
                        FloatTitle = { bg = "none" },

                        -- Save an hlgroup with dark background and dimmed foreground
                        -- so that you can use it where your still want darker windows.
                        -- E.g.: autocmd TermOpen * setlocal winhighlight=Normal:NormalDark
                        NormalDark = { fg = theme.ui.fg_dim, bg = theme.ui.bg_m3 },

                        -- Popular plugins that open floats will link to NormalFloat by default;
                        -- set their background accordingly if you wish to keep them dark and borderless
                        LazyNormal = { bg = theme.ui.bg_m3, fg = theme.ui.fg_dim },
                        MasonNormal = { bg = theme.ui.bg_m3, fg = theme.ui.fg_dim },

                        -- Dark popup windows
                        Pmenu = { fg = theme.ui.shade0, bg = theme.ui.bg_p1, blend = vim.o.pumblend },
                        PmenuSel = { fg = "NONE", bg = theme.ui.bg_p2 },
                        PmenuSbar = { bg = theme.ui.bg_m1 },
                        PmenuThumb = { bg = theme.ui.bg_p2 },
                    }
                end,
                theme = "wave",              -- Load "wave" theme when 'background' option is not set
                background = {               -- map the value of 'background' option to a theme
                    dark = "dragon",           -- try "dragon" !
                    light = "lotus"
                },
            })
            vim.cmd("colorscheme kanagawa")
            -- The kanagawa console looks a bit better with the rest of the theme
            -- use_rstudio_console_colours()
        end
    },
    {
        "nvim-lualine/lualine.nvim",
        config = function()
            require("lualine").setup({
                options = { theme = "kanagawa" },
                sections = {
                    -- Show relative path, not just filename
                    lualine_c = {{ 'filename', path = 1 }},
                }
            })
        end,
    },
}

-------------------------------------------------------------------------------
-- Cobalt2 - nice but still kinda low contrast
-------------------------------------------------------------------------------
-- return {
--     {
--         "lalitmee/cobalt2.nvim",
--         event = { "ColorSchemePre" }, -- if you want to lazy load
--         dependencies = { "tjdevries/colorbuddy.nvim", tag = "v1.0.0" },
--
--         init = function()
--             require("colorbuddy").colorscheme("cobalt2")
--             use_rstudio_console_colours()
--         end,
--     },
--
-- 	{
-- 		"nvim-lualine/lualine.nvim",
-- 		config = function()
-- 			require("lualine").setup({
-- 				options = { theme = "cobalt2" },
-- 				--[[ options = { theme = "dracula" }, ]]
-- 			})
-- 		end,
-- 	},
-- }

-------------------------------------------------------------------------------
-- Everforest - nice but a bit low-contrast 
-------------------------------------------------------------------------------
-- return {
-- 	{
-- 		"neanias/everforest-nvim",
-- 		version = false,
-- 		lazy = false,
-- 		priority = 1000,
-- 		config = function()
-- 			local everforest = require("everforest")
-- 			everforest.setup({
-- 				background = "hard",
-- 				transparent_background_level = 0,
-- 				italics = true,
-- 				disable_italic_comments = false,
-- 				sign_column_background = "none",
-- 				ui_contrast = "high",
-- 				dim_inactive_windows = false,
-- 				diagnostic_text_highlight = true,
-- 				diagnostic_virtual_text = "coloured",
-- 				spell_foreground = false,
-- 				colours_override = function(palette)
-- 					-- Swap the sidebar and main pane background colours - main pane
-- 					-- is a little too washed out for me (aesthetically v nice though)
-- 					palette.bg0, palette.bg_dim = palette.bg_dim, palette.bg0
-- 				end,
-- 			})
-- 			everforest.load()
-- 		end,
-- 	},
-- 	{
-- 		"nvim-lualine/lualine.nvim",
-- 		config = function()
-- 			require("lualine").setup({
-- 				options = { theme = "everforest" },
-- 				--[[ options = { theme = "dracula" }, ]]
-- 			})
-- 		end,
-- 	},
-- }

-------------------------------------------------------------------------------
-- Catppuccin - also nice, but also a bit low contrast
-------------------------------------------------------------------------------
-- return {
--   "catppuccin/nvim",
--   name = "catppuccin",
--   priority = 1000,
--   lazy = false,
--   flavour = "mocha",
--   config = function()
--     vim.cmd.colorscheme "catppuccin"
--   end
-- }

